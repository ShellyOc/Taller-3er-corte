<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cubo en THREE.JS</title>

    <style>
        body { margin: 0; overflow: hidden; background: #111; }
    </style>

    <!-- THREE.js desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
</head>
<body>

<script>

// ESCENA
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.z = 6;

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// MATERIAL (transparente)
const material = new THREE.MeshPhongMaterial({
    color: 0x66ccff,
    transparent: true,
    opacity: 0.4
});

// GEOMETRÍA
const geometry = new THREE.BoxGeometry(3, 3, 3);

// CUBO PRINCIPAL
const cubo = new THREE.Mesh(geometry, material);

// ARISTAS (wireframe)
const edges = new THREE.EdgesGeometry(geometry);
const lineas = new THREE.LineSegments(
    edges,
    new THREE.LineBasicMaterial({ color: 0xffffff })
);

scene.add(cubo);
scene.add(lineas);

// LUZ
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(3, 4, 5);
scene.add(light);

// MODO DE TRANSFORMACIÓN
let modo = "T";  // Traslación por defecto

document.addEventListener("keydown", (e) => {

    if (e.key === "t" || e.key === "T") modo = "T";
    if (e.key === "r" || e.key === "R") modo = "R";
    if (e.key === "s" || e.key === "S") modo = "S";

    // TRASLACIÓN
    if (modo === "T") {
        if (e.key === "ArrowUp") cubo.position.y += 0.1;
        if (e.key === "ArrowDown") cubo.position.y -= 0.1;
        if (e.key === "ArrowLeft") cubo.position.x -= 0.1;
        if (e.key === "ArrowRight") cubo.position.x += 0.1;
    }

    // ROTACIÓN
    if (modo === "R") {
        if (e.key === "ArrowUp") cubo.rotation.x -= 0.1;
        if (e.key === "ArrowDown") cubo.rotation.x += 0.1;
        if (e.key === "ArrowLeft") cubo.rotation.y -= 0.1;
        if (e.key === "ArrowRight") cubo.rotation.y += 0.1;
    }

    // ESCALA
    if (modo === "S") {
        if (e.key === "ArrowUp") cubo.scale.y += 0.1;
        if (e.key === "ArrowDown") cubo.scale.y -= 0.1;
        if (e.key === "ArrowLeft") cubo.scale.x -= 0.1;
        if (e.key === "ArrowRight") cubo.scale.x += 0.1;
    }

    // IMPORTANTE: Las líneas (wireframe) deben seguir la transformación
    lineas.position.copy(cubo.position);
    lineas.rotation.copy(cubo.rotation);
    lineas.scale.copy(cubo.scale);

});

// ANIMACIÓN
function render() {
    requestAnimationFrame(render);
    renderer.render(scene, camera);
}

render();

</script>

</body>
</html>
